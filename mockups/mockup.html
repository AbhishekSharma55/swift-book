<html>
<head>
    <title>TSPL Redirect Test</title>
    <meta http-equiv="refresh" content="5; url=https://example.com/"> <!-- FIXME -->
<head>
<body>
<div>
This content has moved; redirecting to the <a href="" id="redirect">new location</a>.
<noscript>
<aside>
This page requires JavaScript.
Please turn on JavaScript and refresh the page.
</aside>
</noscript>
</div>
<script>
const baseURL = "https://krilnon.github.io/swift-book/documentation/the-swift-programming-language/";  // FIXME
const redirects = {
    "#ID461": "guidedtour#Simple-Values",
    "#ID462": "guidedtour#Control-Flow",
    "#ID463": "guidedtour#Functions-and-Closures",

    "GuidedTour/GuidedTour.html": "guidedtour",
    "GuidedTour/AboutSwift": "aboutswift",
    "GuidedTour/Compatibility": "compatibility",
    "GuidedTour/GuidedTour": "guidedtour",
    "GuidedTour/GuidedTourPart": "guidedtour",
    "LanguageGuide/AccessControl": "accesscontrol",
    "LanguageGuide/AdvancedOperators": "advancedoperators",
    "LanguageGuide/AutomaticReferenceCounting": "automaticreferencecounting",
    "LanguageGuide/BasicOperators": "basicoperators",
    "LanguageGuide/ClassesAndStructures": "classesandstructures",
    "LanguageGuide/Closures": "closures",
    "LanguageGuide/CollectionTypes": "collectiontypes",
    "LanguageGuide/Concurrency": "concurrency",
    "LanguageGuide/ControlFlow": "controlflow",
    "LanguageGuide/Deinitialization": "deinitialization",
    "LanguageGuide/Enumerations": "enumerations",
    "LanguageGuide/ErrorHandling": "errorhandling",
    "LanguageGuide/Extensions": "extensions",
    "LanguageGuide/Functions": "functions",
    "LanguageGuide/Generics": "generics",
    "LanguageGuide/Inheritance": "inheritance",
    "LanguageGuide/Initialization": "initialization",
    "LanguageGuide/LanguageGuidePart": "languageguide",
    "LanguageGuide/MemorySafety": "memorysafety",
    "LanguageGuide/Methods": "methods",
    "LanguageGuide/NestedTypes": "nestedtypes",
    "LanguageGuide/OpaqueTypes": "opaquetypes",
    "LanguageGuide/OptionalChaining": "optionalchaining",
    "LanguageGuide/Properties": "properties",
    "LanguageGuide/Protocols": "protocols",
    "LanguageGuide/StringsAndCharacters": "stringsandcharacters",
    "LanguageGuide/Subscripts": "subscripts",
    "LanguageGuide/TheBasics": "thebasics",
    "LanguageGuide/TypeCasting": "typecasting",
    "ReferenceManual/AboutTheLanguageReference": "aboutthelanguagereference",
    "ReferenceManual/Attributes": "attributes",
    "ReferenceManual/Declarations": "declarations",
    "ReferenceManual/Expressions": "expressions",
    "ReferenceManual/GenericParametersAndArguments": "genericparametersandarguments",
    "ReferenceManual/LexicalStructure": "lexicalstructure",
    "ReferenceManual/Patterns": "patterns",
    "ReferenceManual/ReferenceManualPart": "referencemanual",
    "ReferenceManual/Statements": "statements",
    "ReferenceManual/Types": "types",
    "ReferenceManual/zzSummaryOfTheGrammar": "summaryofthegrammar",
    "RevisionHistory/RevisionHistory": "revisionhistory",
    "RevisionHistory/RevisionHistoryPart": "revisionhistorypart",

    "mockups/mockup.html": "aboutswift",  // FIXME
}

const path = window.location.pathname;
const hash = window.location.hash;

var newURL = baseURL;
var redirectKey = hash;
if (hash == "") {
    var components = path.split("/");
    var bookPart = components[components.length - 2];
    var bookChapter = components[components.length - 1];
    redirectKey = bookPart + "/" + bookChapter;
}

if (redirectKey in redirects) {
    newURL += redirects[redirectKey];
}

document.getElementById("redirect").setAttribute("href", newURL);
window.location = newURL;
</script>
</body>
</html>
